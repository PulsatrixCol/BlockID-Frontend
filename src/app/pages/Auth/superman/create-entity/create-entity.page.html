<app-header [pageName]="pageName"></app-header>

<ion-content>
  <form  #entityForm="ngForm" (ngSubmit)="crearEntity()" >
    <ion-row>
      <ion-col size-lg="12" size-md="12" size-sm="12" size="12" size-xs="12">
        <ion-list>
          <ion-item class="item-input" color="light">
            <ion-input id="nombreInstitucion" name="nombreInstitucion" 
                        #NombreInstitucion="ngModel" 
                        [(ngModel)]="nombre"
                        required minlength="3" 

                        placeholder="Nombre de la intitución">
                <div *ngIf="NombreInstitucion.invalid && (NombreInstitucion.dirty || NombreInstitucion.touched)"
                    class="alert alert-danger">
                  <div *ngIf="NombreInstitucion.errors.required">
                    El nombre de la institución es obligatorio&nbsp;&nbsp;&nbsp;&nbsp;
                  </div>
                  <div *ngIf="NombreInstitucion.errors.minlength">
                    El nombre de la institución debe ser superior a 3 caracteres&nbsp;&nbsp;&nbsp;&nbsp;
                  </div>
                  <div *ngIf="NombreInstitucion.errors.forbiddenName">
                    Name cannot be Bob.
                  </div>
                </div>
            </ion-input>
          </ion-item>
          <ion-item class="item-input" color="light">
            <ion-input  name="NIT_FRONT" #NIT_FRONT="ngModel" 
                        [(ngModel)]="NIT" 
                        placeholder="Ingrese el NIT de la institución"
                        required minlength="7" 
                        pattern  ="\d*-\d">
              <div *ngIf="NIT_FRONT.invalid && (NIT_FRONT.dirty || NIT_FRONT.touched)"
              class="alert alert-danger">
                  <div *ngIf="NIT_FRONT.errors.required">
                    El NIT de la institución es obligatorio&nbsp;&nbsp;&nbsp;&nbsp;
                  </div>
                  <div *ngIf="NIT_FRONT.errors.pattern">
                    El NIT debe ser de la forma 0000000000-1 &nbsp; &nbsp; &nbsp;
                  </div>  
              </div>
            </ion-input>
          </ion-item>
          <ion-item class="item-input" color="light">
            <ion-input name="sitioweb_FRONT" #sitioweb_FRONT="ngModel" [(ngModel)]="sitio_web" placeholder="Ingrese el sitio web de la intitución"></ion-input>
          </ion-item>
          <ion-item class="item-input" color="light">
            <ion-input type="email" name="email_FRONT" 
                      #email_FRONT="ngModel" 
                      [(ngModel)]="email" 
                      placeholder="Ingrese el email de la institución" 
                      pattern = "^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$"
                      required>
              <div *ngIf="email_FRONT.invalid && (email_FRONT.dirty || email_FRONT.touched)" class="alert alert-danger">
                <div *ngIf="email_FRONT.errors.required">
                  El email es obligatorio &nbsp;&nbsp;&nbsp;&nbsp;
                </div>
                <div *ngIf="email_FRONT.errors.pattern">
                    Ingrese un email válido&nbsp;&nbsp;&nbsp;&nbsp;
                </div>  
              </div>
            </ion-input>
          </ion-item>
          <ion-item class="item-input" color="light">
            <ion-input name="notas_front" #notas_front="ngModel" [(ngModel)]="notas" placeholder="Ingrese notas adionales"></ion-input>
          </ion-item>
          <ion-item>
            <ion-button shape="round"  (click)="crearEntity()" style="font-size: large; font-weight: bold;" expand="block" [disabled]="entityForm.invalid">              
              <ion-icon name="business-outline"></ion-icon> Crear
            </ion-button>
          </ion-item>
        </ion-list>
      </ion-col>
    </ion-row>
  </form>
<ion-row class="">
  <ion-item>
    <ion-label>Mostrar Instituciones activas: &nbsp;</ion-label>
    <ion-toggle [(ngModel)]="showTabla"></ion-toggle>
  </ion-item>
  <app-lista-elementos *ngIf="showTabla" tipoTabla="institutions_list" ></app-lista-elementos>
</ion-row>
</ion-content>
